<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Collect and aggregate results — collect_results • mistyR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Collect and aggregate results — collect_results"><meta property="og:description" content="Collect and aggregate performance, contribution and importance estimations
of a set of raw results produced by run_misty()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119440867-9"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119440867-9');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mistyR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/mistyR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/mistySeurat.html">mistyR and Seurat</a>
    </li>
    <li>
      <a href="../articles/mistySpatialExperiment.html">mistyR and SpatialExperiment/SingleCellExperiment</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/saezlab/mistyR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/saezlab" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://www.saezlab.org" class="external-link">
    <span class="fas fa-university"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Collect and aggregate results</h1>
    <small class="dont-index">Source: <a href="https://github.com/saezlab/mistyR/blob/HEAD/R/utils.R" class="external-link"><code>R/utils.R</code></a></small>
    <div class="hidden name"><code>collect_results.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Collect and aggregate performance, contribution and importance estimations
of a set of raw results produced by <code><a href="run_misty.html">run_misty</a>()</code>.</p>
    </div>

    <div id="ref-usage">Usage,<div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">collect_results</span><span class="op">(</span><span class="va">folders</span><span class="op">)</span></code></pre></div></div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>folders</dt>
<dd><p>Paths to folders containing the raw results from
<code><a href="run_misty.html">run_misty</a>()</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>List of collected performance, contributions and importances per sample,
    performance and contribution statistics and aggregated importances.</p><dl><dt><var>improvements</var></dt>
<dd><p>Long format <code>tibble</code> with measurements
            of performance for each <var>target</var> and each <var>sample</var>.
            Available performance measures are RMSE and variance explained
            (R2) for a model containing only an intrinsic view
            (<var>intra.RMSE</var>, <var>intra.R2</var>), model with all views
            (<var>multi.RMSE</var>, <var>multi.R2</var>), gain of RMSE and gain of
            variance explained of multi-view model over the intrisic model
            where <var>gain.RMSE</var> is the relative decrease of RMSE in percent,
            while <var>gain.R2</var> is the absolute increase of variance explained
            in percent. Each <var>value</var> represents the mean performance across
            folds (k-fold cross-validation). The p values of a one sided
            t-test of improvement of performance (<var>p.RMSE</var>, <var>p.R2</var>)
            are also available as a measure.</p></dd>

        <dt><var>improvements.stats</var></dt>
<dd><p>Long format <code>tibble</code> with summary
            statistics (mean, standard deviation and coefficient of variation)
            for all performance measures for each target over all samples.</p></dd>

        <dt><var>contributions</var></dt>
<dd><p>Long format <code>tibble</code> with the values
            of the coefficients for each <var>view</var> in the meta-model, for each
            <var>target</var> and each <var>sample</var>. The p values for the coefficient
            for each view, under the null hypothesis of zero contribution to the
            meta model are also available.</p></dd>

        <dt><var>contributions.stats</var></dt>
<dd><p>Long format <code>tibble</code> with summary
            statistics for all views per target over all samples. Including
            mean coffecient value, fraction of contribution, mean and standard
            deviation of p values.</p></dd>

        <dt><var>importances</var></dt>
<dd><p>List of view-specific predictor-target
        importance tables per sample. The importances in each table are
        standardized per target and weighted by the quantile of the coefficient
        for the target in that view. Columns other than <var>Predictor</var>
        represent target markers.</p></dd>

        <dt><var>importances.aggregated</var></dt>
<dd><p>A list of aggregated view-specific
        predictor-target importance tables . Aggregation is
        reducing by mean over all samples.</p></dd>

    
</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="run_misty.html">run_misty</a>()</code> to train models and
    generate results.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Train and collect results for 3 samples in synthetic</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org" class="external-link">purrr</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"synthetic"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">misty.results</span> <span class="op">&lt;-</span> <span class="va">synthetic</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap_chr</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="create_initial_view.html">create_initial_view</a></span><span class="op">(</span><span class="va">.x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">row</span>, <span class="va">col</span>, <span class="va">type</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">    <span class="fu"><a href="add_paraview.html">add_paraview</a></span><span class="op">(</span><span class="va">.x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">row</span>, <span class="va">col</span><span class="op">)</span>, l <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">    <span class="fu"><a href="run_misty.html">run_misty</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"results/"</span>, <span class="va">.y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">collect_results</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Generating paraview</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Training models</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Generating paraview</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Training models</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Generating paraview</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Training models</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Collecting improvements</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Collecting contributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Collecting importances</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Aggregating</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">misty.results</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ improvements          : tibble [264 × 4] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ target : chr [1:264] "ECM" "ECM" "ECM" "ECM" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sample : chr [1:264] "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ measure: chr [1:264] "intra.RMSE" "intra.R2" "multi.RMSE" "multi.R2" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ value  : num [1:264] 0.1056 92.5215 0.0985 93.4856 0.0274 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ contributions         : tibble [198 × 4] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ target: chr [1:198] "ECM" "ECM" "ECM" "ECM" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sample: chr [1:198] "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ view  : chr [1:198] "intercept" "intra" "para.10" "p.intercept" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ value : num [1:198] -7.41e-02 9.92e-01 2.59e-01 2.80e-106 0.00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ importances           : tibble [726 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sample    : chr [1:726] "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" "/tmp/Rtmpiv82LD/filec2a0773041f5/reference/results/synthetic1" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ view      : chr [1:726] "intra" "intra" "intra" "intra" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ Predictor : chr [1:726] "ECM" "ECM" "ECM" "ECM" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ Target    : chr [1:726] "ECM" "ligA" "ligB" "ligC" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ Importance: num [1:726] NA -0.621 0.305 -0.375 -0.598 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ improvements.stats    : tibble [66 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ target : chr [1:66] "ECM" "ECM" "ECM" "ECM" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ measure: chr [1:66] "gain.R2" "gain.RMSE" "intra.R2" "intra.RMSE" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ mean   : num [1:66] 0.86 6.188 92.836 0.101 93.696 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sd     : num [1:66] 0.11674 0.8589 0.33867 0.00577 0.33033 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ cv     : num [1:66] 0.13572 0.1388 0.00365 0.05744 0.00353 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ contributions.stats   : tibble [22 × 6] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ target  : chr [1:22] "ECM" "ECM" "ligA" "ligA" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ view    : chr [1:22] "intra" "para.10" "intra" "para.10" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ mean    : num [1:22] 0.989 0.245 0.996 0.066 0.985 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ fraction: num [1:22] 0.8012 0.1988 0.9379 0.0621 0.7747 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ p.mean  : num [1:22] 0.00 1.27e-101 0.00 1.26e-44 0.00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ p.sd    : num [1:22] 0.00 2.20e-101 0.00 2.12e-44 0.00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ importances.aggregated: tibble [242 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ view      : chr [1:242] "intra" "intra" "intra" "intra" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ Predictor : chr [1:242] "ECM" "ECM" "ECM" "ECM" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ Target    : chr [1:242] "ECM" "ligA" "ligB" "ligC" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ Importance: num [1:242] NA -0.616 0.345 -0.388 -0.615 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ nsamples  : int [1:242] 3 3 3 3 3 3 3 3 3 3 ...</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jovan Tanevski.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

      </footer></div>

  


  

  </body></html>

